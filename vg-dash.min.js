"use strict";angular.module("com.2fdevs.videogular.plugins.dash",[]).directive("vgDash",["$window",function(e){return{restrict:"A",require:"^videogular",link:function(a,t,i,n){function r(){return"MediaSource"in e}var s,u=/^application\/dash\+xml/i;r()&&(a.isDASH=function(e){var a=u.test(e.type),t=e.src.indexOf&&e.src.indexOf(".mpd")>0;return a||t},a.onSourceChange=function(e){if(e.src){var t=e.src;a.isDASH(e)?angular.isFunction(dashjs&&dashjs.MediaPlayer)?(s=dashjs.MediaPlayer().create(),s.initialize(n.mediaElement[0],t,n.autoPlay)):(s=new MediaPlayer(new Dash.di.DashContext),s.setAutoPlay(n.autoPlay),s.startup(),s.attachView(n.mediaElement[0]),s.attachSource(t)):s&&(s.reset(),s=null,n.mediaElement.attr("src",t),n.stop())}},a.$watch(function(){return n.sources},function(e){a.onSourceChange(e[0])}))}}}]);